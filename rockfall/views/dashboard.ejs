<%- include('partials/header', { title: 'Dashboard' , activePage: 'dashboard' }) %>

<main class="main">
  <div class="dashboard-header">
    <h2>Mine Slope Stability Dashboard</h2>
    <p>Real-time monitoring and risk assessment for mining operations</p>
  </div>
  <section class="stats-cards">
    <div class="stat-card">
      <div class="stat-card-title">Current Risk Level</div>
      <div class="stat-card-value">Medium</div>
      <div class="risk-level risk-medium">65%</div>
      <div class="progress-bar">
        <div class="progress-fill progress-65"></div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-card-title">Active Alerts</div>
      <div class="stat-card-value">3</div>
      <div class="stat-card-desc">2 High Priority</div>
    </div>
    <div class="stat-card">
      <div class="stat-card-title">Sensors Online</div>
      <div class="stat-card-value">24/26</div>
      <div class="progress-bar">
        <div class="progress-fill progress-92"></div>
      </div>
      <div class="stat-card-desc">92% Operational</div>
    </div>
    <div class="stat-card">
      <div class="stat-card-title">Last Update</div>
      <div class="stat-card-value last-update-time">--:--:--</div>
      <div class="stat-card-desc">Auto-refresh: 30s</div>
    </div>
  </section>
  <section class="charts-grid">
    <div class="card">
      <h3>Slope Stability Trends</h3>
      <p class="subtitle">24-hour stability monitoring</p>
      <div class="chart-container"><canvas id="stabilityChartCanvas"></canvas></div>
    </div>
    <div class="card">
      <h3>Environmental Factors</h3>
      <p class="subtitle">Rainfall and temperature data</p>
      <div class="chart-container"><canvas id="environmentChartCanvas"></canvas></div>
    </div>
    <div class="card">
      <h3>Sensor Network Status</h3>
      <p class="subtitle">Real-time sensor readings</p>
      <div class="sensor-row">
        <span>Sensor A</span>
        <div class="bar">
          <div class="fill" style="width:92%"></div>
        </div>
        <span class="val">92%</span>
      </div>
      <div class="sensor-row">
        <span>Sensor B</span>
        <div class="bar">
          <div class="fill yellow" style="width:78%"></div>
        </div>
        <span class="val">78%</span>
      </div>
      <div class="sensor-row">
        <span>Sensor C</span>
        <div class="bar">
          <div class="fill red" style="width:65%"></div>
        </div>
        <span class="val">65%</span>
      </div>
      <div class="sensor-row">
        <span>Sensor D</span>
        <div class="bar">
          <div class="fill green" style="width:88%"></div>
        </div>
        <span class="val">88%</span>
      </div>
    </div>
    <div class="card">
      <h3>Quick Actions</h3>
      <p class="subtitle">Common monitoring tasks</p>
      <button class="action-btn">View Real-Time Risk Map</button>
      <button class="action-btn">View Active Alerts</button>
      <button class="action-btn">Upload New Data</button>
      <button class="action-btn">Download Reports</button>
      <button class="action-btn">View Recommendations</button>
    </div>
  </section>
  <div class="card">
    <section class="recent-activity">
      <h4>Recent Activity</h4>
      <br>
      <ul>
        <li class="alert high">High Risk Alert – Sector C</li>
        <li class="alert medium">Sensor Network Update – Sensor B Elevated</li>
        <li class="alert info">Weather Update – Heavy rainfall detected</li>
      </ul>
    </section>
  </div>
</main>
<%- include('partials/footer') %>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="/js/dashboard.js"></script>